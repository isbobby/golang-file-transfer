# Golang File Transfer

## Dependencies
[Docker](https://www.docker.com/products/docker-desktop)<br>
[Kubernetes](https://kubernetes.io/docs/tasks/tools/)<br>
[Minikube](https://minikube.sigs.k8s.io/docs/start/)<br>

## Running Commands With Script
In root directory, give script execution rights `sudo chmod +x k8_helper.sh`

Set up cluster, create images and containers by running `./k8_helper.sh setup`

View logs generated by both sender and receiver container, run `./k8_helper.sh logs`

Delete containers and images, run `./k8_helper.sh clean`

## Verify file transfer
The sender will send the file named 'data' under /sender. The max fiel size is kept at 4kb (4096 bytes).<br>

File transfer happens on container creation, after running `./k8_helper.sh setup`.<br>

Verify file is transfered to the other container by viewing logs via `./k8_helper.sh logs`, or connect to the receiver container via SSH. The received file will be saved under the receiver root directory and named 'received'

## Final clean up
Stop minikube with `minikube stop`<br>
Delete minikube instance from your docker with `minikube delete`

## Application Description
Receiver - A simple golang program which listens on port 8080 for TCP connections. When any host connects to it, it will read the incoming data, convert into text file and store in its root directory. The receiver Dockerfile is in its root directory. <br>

Sender - A simple golang program which reads an existing file and save it as byte array, then connects with the specified receiver host and sends it over via TCP connection. The sender Dockerfile is in its root directory.<br>

K8 Pods - There will be two pods created. One is based on the receiver image and the other is based on the sender image. The pod creation specification are stored in **`receiver-deployment.yaml`** and **`sender-deployment.yaml`.** <br>

K8 Service - One single service is created and attached to receiver host. This allows the receiver endpoint to be exposed to other pods. The sender application will use this endpoint for file transfer. The service specification is written in **`receiver-service`.** <br>
